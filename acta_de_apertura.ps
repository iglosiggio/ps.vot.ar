%!PS-Adobe-3.0
%%Creator: Ignacio E. Losiggio
%%CreationDate: Wed Sep 20 15:29:00 2017
%%Pages: 1
%%DocumentData: Clean7Bit
%%LanguageLevel: 2
%%DocumentMedia: A4 595 842 0 () ()
%%BoundingBox: 0 0 595 842
%%EndComments

% El trucazo para poder definir cosas en userdict y que queden entre impresiones
true 0 startjob pop

/cantvotos 300 def % Las mesas no tienen mas de 400 votantes en general
/currvoto 0 def
/votos cantvotos array def

/sumarvoto {
  votos currvoto 3 -1 roll % acomodo el stack
  put % sumo el voto
  /currvoto currvoto 1 add cantvotos mod def % incremento el voto actual
} def

/realshow systemdict /show get def
/show {
  dup (ekoelecciones) eq {
    true 0 startjob
  } {
    dup (LISTA 1) eq {
      (LISTA 1 - FACIL Y RAPIDO) sumarvoto
      % Ver si necesito reiniciar el canvas
      false 0 startjob
     } {
      dup (LISTA 2) eq {
        (LISTA 2 - ILUSIONISTAS INFORMATICOS) sumarvoto
        % Ver si necesito reiniciar el canvas
        false 0 startjob
      } {
        dup (FACIL Y RAPIDO) eq {
          90 rotate
          /Helvetica findfont 16 scalefont setfont
          25 -20 16 sub moveto
          (ekoelecciones) realshow
          /Helvetica findfont 72 scalefont setfont
          20 -20 5 sub 72 sub moveto
          (LISTA 1) realshow
          /Helvetica findfont 52 scalefont setfont
          20 -20 5 sub 72 sub 52 sub moveto
        } {
          dup (ILUSIONISTAS) eq {
            90 rotate
            /Helvetica findfont 16 scalefont setfont
            25 -20 16 sub moveto
            (ekoelecciones) realshow
            /Helvetica findfont 72 scalefont setfont
            20 -20 5 sub 72 sub moveto
            (LISTA 2) realshow
            /Helvetica findfont 52 scalefont setfont
            20 -20 5 sub 72 sub 52 sub moveto
          } if
        } ifelse
      } ifelse
    } ifelse
  } ifelse
  realshow
} def

% Imprimo algo
false 0 startjob pop

/fontsize 48 def

/ypos 780 def
/newline {
  40 ypos moveto
  /ypos ypos fontsize sub def
} def

/Courier findfont fontsize scalefont setfont
newline (Acta de apertura) show
/fontsize 24 def
/Courier findfont fontsize scalefont setfont
newline (  Maquina de voto: Impresora) show
newline (            Lugar: ekoparty2017) show
showpage
